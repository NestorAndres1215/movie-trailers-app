<% layout('layout/main') %>

<!-- Contenedor principal -->
<div class="max-w-2xl mx-auto px-6 py-8">

  <!-- Título -->
  <h2 class="text-3xl md:text-4xl font-bold text-white mb-8 flex items-center gap-3">
    <i class="fas fa-edit text-netflix-red text-4xl"></i>
    Editar película
  </h2>

  <!-- Formulario estilo Netflix -->
  <form 
    action="/edit/<%= movie.id %>" 
    method="POST" 
    enctype="multipart/form-data" 
    class="space-y-6 bg-netflix-dark p-8 rounded-xl shadow-2xl border border-gray-700"
  >
    
    <!-- Título -->
    <div>
      <label for="title" class="block text-sm font-medium text-gray-300 mb-2">
        <i class="fas fa-heading text-netflix-red mr-1"></i> Título
      </label>
      <input 
        type="text" 
        name="title" 
        id="title"
        value="<%= movie.title %>" 
        required
        class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-netflix-red focus:border-transparent transition-all"
      >
    </div>

    <!-- Descripción -->
    <div>
      <label for="description" class="block text-sm font-medium text-gray-300 mb-2">
        <i class="fas fa-align-left text-netflix-red mr-1"></i> Descripción
      </label>
      <textarea 
        name="description" 
        id="description"
        rows="4" 
        class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-netflix-red focus:border-transparent transition-all resize-none"
      ><%= movie.description %></textarea>
    </div>

    <!-- Año -->
    <div>
      <label for="year" class="block text-sm font-medium text-gray-300 mb-2">
        <i class="fas fa-calendar-alt text-netflix-red mr-1"></i> Año
      </label>
      <input 
        type="number" 
        name="year" 
        id="year"
        value="<%= movie.year %>" 
        min="1900" 
        max="2030"
        class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-netflix-red focus:border-transparent transition-all"
      >
    </div>

    <!-- Género -->
    <div>
      <label for="genre" class="block text-sm font-medium text-gray-300 mb-2">
        <i class="fas fa-tag text-netflix-red mr-1"></i> Género
      </label>
      <input 
        type="text" 
        name="genre" 
        id="genre"
        value="<%= movie.genre %>" 
        class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-netflix-red focus:border-transparent transition-all"
      >
    </div>

    <!-- URL Trailer -->
    <div>
      <label for="trailer_url" class="block text-sm font-medium text-gray-300 mb-2">
        <i class="fab fa-youtube text-netflix-red mr-1"></i> URL del tráiler (YouTube)
      </label>
      <input 
        type="url" 
        name="trailer_url" 
        id="trailer_url"
        value="<%= movie.trailer_url %>"
        class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-netflix-red focus:border-transparent transition-all"
      >
    </div>

    <!-- Imagen actual -->
    <div>
      <label class="block text-sm font-medium text-gray-300 mb-2">
        <i class="fas fa-image text-netflix-red mr-1"></i> Imagen actual
      </label>
      <div class="flex items-center gap-4 mb-4">
        <img 
          src="/uploads/<%= movie.image %>" 
          alt="<%= movie.title %>" 
          class="w-32 h-32 object-cover rounded-lg shadow-md border border-gray-600"
          loading="lazy"
        >
        <p class="text-sm text-gray-400">
          <%= movie.image %>
        </p>
      </div>
      <input type="hidden" name="oldImage" value="<%= movie.image %>">
    </div>

    <!-- Nueva imagen (opcional) -->
    <div>
      <label for="image" class="block text-sm font-medium text-gray-300 mb-2">
        <i class="fas fa-cloud-upload-alt text-netflix-red mr-1"></i> Cambiar imagen (opcional)
      </label>
      <div class="flex items-center justify-center w-full">
        <label for="image" class="flex flex-col items-center justify-center w-full h-48 border-2 border-gray-600 border-dashed rounded-lg cursor-pointer bg-gray-800 hover:bg-gray-700 transition-all">
          <div class="flex flex-col items-center justify-center pt-5 pb-6">
            <i class="fas fa-cloud-upload-alt text-4xl text-gray-500 mb-3"></i>
            <p class="mb-2 text-sm text-gray-400"><span class="font-semibold">Haz clic para subir</span></p>
            <p class="text-xs text-gray-500">PNG, JPG hasta 5MB</p>
          </div>
          <input 
            type="file" 
            name="image" 
            id="image"
            accept="image/*"
            class="hidden"
          >
        </label>
      </div>
    </div>

    <!-- Botones -->
    <div class="flex gap-4 pt-4">
      <button 
        type="submit" 
        class="flex-1 bg-netflix-red hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center gap-2"
      >
        <i class="fas fa-save"></i>
        Actualizar película
      </button>

      <a href="/admin" 
         class="flex-1 bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 text-center flex items-center justify-center gap-2"
      >
        <i class="fas fa-arrow-left"></i>
        Cancelar
      </a>
    </div>
  </form>
</div>