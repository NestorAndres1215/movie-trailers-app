<% layout('layout/main') %>
<% layout('layout/main') %>

<!-- Contenedor principal -->
<div class="px-6 py-8">

  <!-- Título -->
  <h2 class="text-3xl md:text-4xl font-bold text-white mb-8 flex items-center gap-3">
    <i class="fas fa-cog text-netflix-red text-4xl"></i>
    Administración
  </h2>

  <!-- Botón Crear -->
  <a href="/create" 
     class="inline-flex items-center gap-2 bg-netflix-red hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 mb-8">
    <i class="fas fa-plus"></i>
    Crear película
  </a>

  <!-- Tabla moderna y responsive -->
  <div class="overflow-x-auto rounded-lg shadow-xl bg-netflix-dark">
    <table class="w-full text-white">
      <thead class="bg-netflix-red/20 text-left uppercase tracking-wider text-sm">
        <tr>
          <th class="px-4 py-3 font-semibold">ID</th>
          <th class="px-4 py-3 font-semibold">Título</th>
          <th class="px-4 py-3 font-semibold">Género</th>
          <th class="px-4 py-3 font-semibold">Año</th>
          <th class="px-4 py-3 font-semibold">Imagen</th>
          <th class="px-4 py-3 font-semibold text-center">Acciones</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-700">
        <% movies.forEach(m => { %>
          <tr class="hover:bg-gray-800/50 transition-colors duration-200">
            <td class="px-4 py-4 text-sm text-gray-300">#<%= m.id %></td>
            <td class="px-4 py-4 font-medium text-white"><%= m.title %></td>
            <td class="px-4 py-4 text-sm text-gray-400">
              <i class="fas fa-tag text-netflix-red mr-1"></i><%= m.genre %>
            </td>
            <td class="px-4 py-4 text-sm text-gray-400">
              <i class="fas fa-calendar-alt text-netflix-red mr-1"></i><%= m.year %>
            </td>
            <td class="px-4 py-4">
              <img src="/uploads/<%= m.image %>" 
                   alt="<%= m.title %>" 
                   class="w-16 h-16 object-cover rounded-md shadow-md"
                   loading="lazy">
            </td>
            <td class="px-4 py-4 text-center">
              <div class="flex items-center justify-center gap-3 text-sm">
                <a href="/detail/<%= m.id %>" 
                   class="text-netflix-red hover:underline flex items-center gap-1">
                  <i class="fas fa-eye"></i> Ver
                </a>
                <span class="text-gray-600">|</span>
                <a href="/edit/<%= m.id %>" 
                   class="text-yellow-400 hover:underline flex items-center gap-1">
                  <i class="fas fa-edit"></i> Editar
                </a>
                <span class="text-gray-600">|</span>
                <a href="/delete/<%= m.id %>" 
                   onclick="return confirm('¿Eliminar película?')"
                   class="text-red-400 hover:underline flex items-center gap-1">
                  <i class="fas fa-trash-alt"></i> Eliminar
                </a>
              </div>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>

    <!-- Estado vacío -->
    <% if (movies.length === 0) { %>
      <div class="text-center py-16 text-gray-400">
        <i class="fas fa-film text-6xl mb-4 text-gray-600"></i>
        <p class="text-lg">No hay películas en el catálogo.</p>
      </div>
    <% } %>
  </div>
</div>